import{c as u,j as t,q as m}from"./index-GfsaLtzC.js";import{s as h,u as p,a as j,A as x}from"./add-form-B9SgOT1d.js";import{u as y}from"./useQuery-n3eTkuGX.js";import{d as g}from"./network-qS66KcGb.js";import"./utils-g-Ig_Dqa.js";import"./input-l1jmeQG_.js";const f=u("/single-post")({validateSearch:h}),R=function(){const{id:n}=f.useSearch(),r=p(),{isPending:o,error:a,data:e}=y({queryKey:["singlePost",n],queryFn:async({queryKey:s})=>{const[l,d]=s;return await(await fetch(`/api/AIPosts/${d}`)).json()}}),i=j({mutationFn:g,onSettled:()=>m.invalidateQueries({queryKey:["postData"]})}),c=async s=>{try{await i.mutateAsync(s)}catch{alert("Error deleting post")}finally{r({to:"/"})}};return o?t.jsx("div",{children:"Loading..."}):a?t.jsx("div",{children:"Something went wrong"}):t.jsxs("div",{className:"container",children:[t.jsx("h1",{children:e.title}),t.jsx("p",{children:e.content}),t.jsx("p",{children:e.authorName}),t.jsx("p",{children:e.createdAt}),t.jsx("button",{onClick:()=>c(e.id),children:"Delete"}),t.jsx(x,{parentId:n})]})};export{f as Route,R as component};
